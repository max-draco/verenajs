import s from './index.module.css';
export function createDragList({items=[],onReorder=()=>{}}){const c=document.createElement('div');c.className=s.list;let dragEl=null,dragIdx=0;const render=()=>{c.innerHTML='';items.forEach((item,i)=>{const el=document.createElement('div');el.className=s.item;el.draggable=true;el.innerHTML=`<span class="${s.handle}">⋮⋮</span><span class="${s.content}">${item.label||item}</span>`;el.ondragstart=()=>{dragEl=el;dragIdx=i;el.classList.add(s.dragging);};el.ondragend=()=>{el.classList.remove(s.dragging);dragEl=null;};el.ondragover=e=>{e.preventDefault();if(dragEl&&dragEl!==el){const rect=el.getBoundingClientRect();const mid=(rect.top+rect.bottom)/2;const newIdx=e.clientY<mid?i:i+1;if(newIdx!==dragIdx){items.splice(dragIdx,1);items.splice(newIdx>dragIdx?newIdx-1:newIdx,0,item);dragIdx=newIdx>dragIdx?newIdx-1:newIdx;onReorder(items);render();}}};c.appendChild(el);});};render();return{el:c,getItems:()=>items};}