import s from './index.module.css';
export function createAnalyticsChart({title='',subtitle='',data=[],type='line',height=300}){const c=document.createElement('div');c.className=s.chart;c.innerHTML=`<div class="${s.header}"><div><h3 class="${s.title}">${title}</h3>${subtitle?`<p class="${s.subtitle}">${subtitle}</p>`:''}</div><div class="${s.filters}"><button class="${s.filter} ${s.active}">Day</button><button class="${s.filter}">Week</button><button class="${s.filter}">Month</button></div></div><div class="${s.canvas}" style="height:${height}px"></div>`;const canvas=c.querySelector('.'+s.canvas);if(data.length){const max=Math.max(...data.map(d=>d.value));const min=Math.min(...data.map(d=>d.value));const range=max-min||1;const w=100,h=100;const pts=data.map((d,i)=>({x:(i/(data.length-1))*w,y:h-((d.value-min)/range)*h*0.8-h*0.1}));const pathD=pts.map((p,i)=>`${i===0?'M':'L'}${p.x},${p.y}`).join(' ');canvas.innerHTML=`<svg viewBox="0 0 100 100" preserveAspectRatio="none"><defs><linearGradient id="ag" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#3b82f6" stop-opacity="0.4"/><stop offset="100%" stop-color="#3b82f6" stop-opacity="0"/></linearGradient></defs><path d="${pathD} L100,100 L0,100 Z" fill="url(#ag)"/><path d="${pathD}" fill="none" stroke="#3b82f6" stroke-width="0.5"/></svg>`;}c.querySelectorAll('.'+s.filter).forEach(f=>f.onclick=()=>{c.querySelectorAll('.'+s.filter).forEach(x=>x.classList.remove(s.active));f.classList.add(s.active);});return c;}