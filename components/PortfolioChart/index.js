import s from './index.module.css';
export function createPortfolioChart({value=0,change=0,data=[],period='1W'}){const c=document.createElement('div');c.className=s.chart;const changeClass=change>=0?s.positive:s.negative;c.innerHTML=`<div class="${s.header}"><div class="${s.value}">$${value.toLocaleString()}</div><div class="${s.change} ${changeClass}">${change>=0?'↑':'↓'} ${Math.abs(change).toFixed(2)}%</div></div><div class="${s.graph}"></div><div class="${s.periods}"><button class="${period==='1D'?s.active:''}" data-p="1D">1D</button><button class="${period==='1W'?s.active:''}" data-p="1W">1W</button><button class="${period==='1M'?s.active:''}" data-p="1M">1M</button><button class="${period==='1Y'?s.active:''}" data-p="1Y">1Y</button><button class="${period==='ALL'?s.active:''}" data-p="ALL">ALL</button></div>`;const graph=c.querySelector('.'+s.graph);if(data.length){const max=Math.max(...data),min=Math.min(...data),range=max-min||1;const pts=data.map((v,i)=>({x:(i/(data.length-1))*100,y:100-((v-min)/range)*80-10}));const d=pts.map((p,i)=>`${i===0?'M':'L'}${p.x},${p.y}`).join(' ');const color=change>=0?'#22c55e':'#ef4444';graph.innerHTML=`<svg viewBox="0 0 100 100" preserveAspectRatio="none"><defs><linearGradient id="pg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="${color}" stop-opacity="0.3"/><stop offset="100%" stop-color="${color}" stop-opacity="0"/></linearGradient></defs><path d="${d} L100,100 L0,100 Z" fill="url(#pg)"/><path d="${d}" fill="none" stroke="${color}" stroke-width="0.5"/></svg>`;}return{el:c,onPeriodChange:(cb)=>{c.querySelectorAll('[data-p]').forEach(btn=>btn.onclick=()=>cb(btn.dataset.p));}};}