import s from './index.module.css';
export function createTimePicker({value='12:00',format='24h',onChange=()=>{}}){const c=document.createElement('div');c.className=s.picker;const [h,m]=value.split(':').map(Number);let hours=h,minutes=m,period='AM';if(format==='12h'){period=hours>=12?'PM':'AM';hours=hours%12||12;}const render=()=>{c.innerHTML=`<div class="${s.field}"><button class="${s.btn}" data-action="h+">▲</button><span class="${s.value}">${String(hours).padStart(2,'0')}</span><button class="${s.btn}" data-action="h-">▼</button></div><span class="${s.sep}">:</span><div class="${s.field}"><button class="${s.btn}" data-action="m+">▲</button><span class="${s.value}">${String(minutes).padStart(2,'0')}</span><button class="${s.btn}" data-action="m-">▼</button></div>${format==='12h'?`<button class="${s.period}">${period}</button>`:''}`;c.querySelectorAll('[data-action]').forEach(btn=>btn.onclick=()=>{const a=btn.dataset.action;if(a==='h+')hours=(hours+1)%(format==='12h'?13:24)||1;if(a==='h-')hours=(hours-1+24)%(format==='12h'?13:24)||12;if(a==='m+')minutes=(minutes+1)%60;if(a==='m-')minutes=(minutes-1+60)%60;render();let h24=hours;if(format==='12h'){h24=period==='PM'?(hours%12)+12:hours%12;}onChange(`${String(h24).padStart(2,'0')}:${String(minutes).padStart(2,'0')}`);});const per=c.querySelector('.'+s.period);if(per)per.onclick=()=>{period=period==='AM'?'PM':'AM';render();};};render();return c;}