import s from './index.module.css';
export function createDepthChart({bids=[],asks=[],width=400,height=200}){const c=document.createElement('div');c.className=s.chart;if(!bids.length&&!asks.length){c.innerHTML=`<div class="${s.empty}">No depth data</div>`;return c;}const allPrices=[...bids,...asks].map(o=>o.price);const minP=Math.min(...allPrices),maxP=Math.max(...allPrices);const range=maxP-minP||1;let bidCum=0,askCum=0;const bidPts=bids.sort((a,b)=>b.price-a.price).map(o=>{bidCum+=o.size;return{price:o.price,cum:bidCum};});const askPts=asks.sort((a,b)=>a.price-b.price).map(o=>{askCum+=o.size;return{price:o.price,cum:askCum};});const maxCum=Math.max(bidCum,askCum);const toX=p=>((p-minP)/range)*width;const toY=v=>height-20-(v/maxCum)*(height-40);let bidPath=`M0,${height-20}`;bidPts.forEach(p=>{bidPath+=` L${toX(p.price)},${toY(p.cum)}`;});bidPath+=` L${toX(bidPts[bidPts.length-1]?.price||0)},${height-20} Z`;let askPath=`M${width},${height-20}`;askPts.forEach(p=>{askPath+=` L${toX(p.price)},${toY(p.cum)}`;});askPath+=` L${toX(askPts[askPts.length-1]?.price||width)},${height-20} Z`;c.innerHTML=`<svg viewBox="0 0 ${width} ${height}"><path d="${bidPath}" fill="#22c55e40" stroke="#22c55e" stroke-width="2"/><path d="${askPath}" fill="#ef444440" stroke="#ef4444" stroke-width="2"/></svg>`;return c;}