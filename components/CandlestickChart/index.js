import s from './index.module.css';
export function createCandlestickChart({data=[],width=400,height=200}){const c=document.createElement('div');c.className=s.chart;if(!data.length)return c;const max=Math.max(...data.map(d=>d.high));const min=Math.min(...data.map(d=>d.low));const range=max-min||1;const barW=(width-40)/data.length;const getY=v=>height-20-((v-min)/range)*(height-40);let candles='';data.forEach((d,i)=>{const x=20+i*barW+barW/2;const oY=getY(d.open),cY=getY(d.close),hY=getY(d.high),lY=getY(d.low);const up=d.close>=d.open;const col=up?'#22c55e':'#ef4444';const bodyTop=Math.min(oY,cY),bodyH=Math.abs(cY-oY)||1;candles+=`<line x1="${x}" y1="${hY}" x2="${x}" y2="${lY}" stroke="${col}" stroke-width="1"/><rect x="${x-barW*0.35}" y="${bodyTop}" width="${barW*0.7}" height="${bodyH}" fill="${col}"/>`;});c.innerHTML=`<svg viewBox="0 0 ${width} ${height}" class="${s.svg}">${candles}</svg>`;return c;}