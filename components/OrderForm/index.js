import s from './index.module.css';
export function createOrderForm({side='yes',price=50,onSubmit=()=>{}}){const c=document.createElement('div');c.className=s.form;let amount=10,orderType='market';const calc=()=>{const shares=orderType==='market'?(amount/price)*100:amount;const potential=shares*(100-price)/100;return{shares:shares.toFixed(2),potential:potential.toFixed(2),maxLoss:amount.toFixed(2)};};const render=()=>{const{shares,potential,maxLoss}=calc();c.innerHTML=`<div class="${s.tabs}"><button class="${s.tab} ${orderType==='market'?s.active:''}" data-type="market">Market</button><button class="${s.tab} ${orderType==='limit'?s.active:''}" data-type="limit">Limit</button></div><div class="${s.field}"><label>Amount ($)</label><input type="number" class="${s.input}" value="${amount}" min="1" step="1"></div>${orderType==='limit'?`<div class="${s.field}"><label>Limit Price (Â¢)</label><input type="number" class="${s.priceInput}" value="${price}" min="1" max="99"></div>`:''}<div class="${s.summary}"><div class="${s.row}"><span>Est. Shares</span><span>${shares}</span></div><div class="${s.row}"><span>Max Profit</span><span class="${s.profit}">+$${potential}</span></div><div class="${s.row}"><span>Max Loss</span><span class="${s.loss}">-$${maxLoss}</span></div></div><button class="${s.submit} ${side==='yes'?s.yes:s.no}">Buy ${side.toUpperCase()}</button>`;c.querySelectorAll('.'+s.tab).forEach(t=>t.onclick=()=>{orderType=t.dataset.type;render();});const inp=c.querySelector('.'+s.input);inp.oninput=e=>{amount=+e.target.value;render();};const pr=c.querySelector('.'+s.priceInput);if(pr)pr.oninput=e=>{price=+e.target.value;render();};c.querySelector('.'+s.submit).onclick=()=>onSubmit({side,amount,price,orderType,shares:calc().shares});};render();return c;}