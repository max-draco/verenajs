import s from './index.module.css';
export function createLineChart({data=[],width=400,height=200,color='#3b82f6',showGrid=true,showTooltip=true}){const c=document.createElement('div');c.className=s.chart;if(!data.length)return c;const max=Math.max(...data.map(d=>d.y));const min=Math.min(...data.map(d=>d.y));const range=max-min||1;const padY=height*0.1;const points=data.map((d,i)=>({x:(i/(data.length-1))*(width-40)+20,y:height-padY-((d.y-min)/range)*(height-2*padY),val:d}));const pathD=points.map((p,i)=>`${i===0?'M':'L'}${p.x},${p.y}`).join(' ');const areaD=pathD+` L${points[points.length-1].x},${height} L${points[0].x},${height} Z`;let gridLines='';if(showGrid)for(let i=0;i<=4;i++){const y=padY+i*(height-2*padY)/4;gridLines+=`<line x1="20" y1="${y}" x2="${width-20}" y2="${y}" stroke="#2a2a4e" stroke-dasharray="4"/>`;}c.innerHTML=`<svg viewBox="0 0 ${width} ${height}" class="${s.svg}">${gridLines}<defs><linearGradient id="areaGrad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="${color}" stop-opacity="0.3"/><stop offset="100%" stop-color="${color}" stop-opacity="0"/></linearGradient></defs><path d="${areaD}" fill="url(#areaGrad)"/><path d="${pathD}" fill="none" stroke="${color}" stroke-width="2"/>${points.map(p=>`<circle cx="${p.x}" cy="${p.y}" r="4" fill="${color}" class="${s.dot}"/>`).join('')}</svg>`;return c;}