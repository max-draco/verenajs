import s from './index.module.css';
export function createPullToRefresh({onRefresh=async()=>{},threshold=80}){const c=document.createElement('div');c.className=s.container;const indicator=document.createElement('div');indicator.className=s.indicator;indicator.innerHTML='↓ Pull to refresh';const content=document.createElement('div');content.className=s.content;c.append(indicator,content);let startY=0,pulling=false;c.ontouchstart=e=>{if(c.scrollTop===0){startY=e.touches[0].clientY;pulling=true;}};c.ontouchmove=e=>{if(!pulling)return;const delta=e.touches[0].clientY-startY;if(delta>0){indicator.style.height=Math.min(delta,threshold)+'px';indicator.textContent=delta>threshold?'↑ Release to refresh':'↓ Pull to refresh';}};c.ontouchend=async()=>{if(!pulling)return;pulling=false;if(parseInt(indicator.style.height)>=threshold){indicator.textContent='Refreshing...';await onRefresh();}indicator.style.height='0';};return{el:c,setContent:(el)=>{content.innerHTML='';content.appendChild(el);}};}