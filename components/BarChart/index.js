import s from './index.module.css';
export function createBarChart({data=[],width=400,height=200,color='#3b82f6',horizontal=false}){const c=document.createElement('div');c.className=s.chart;if(!data.length)return c;const max=Math.max(...data.map(d=>d.value));const barWidth=horizontal?(height-40)/data.length:(width-40)/data.length;const gap=4;let bars='';data.forEach((d,i)=>{const pct=(d.value/max)*100;if(horizontal){const h=(barWidth-gap);const w=((width-80)*pct/100);bars+=`<g><rect x="60" y="${20+i*barWidth}" width="${w}" height="${h}" fill="${d.color||color}" rx="4"/><text x="55" y="${20+i*barWidth+h/2+4}" fill="#a0a0a0" text-anchor="end" font-size="12">${d.label}</text></g>`;}else{const w=(barWidth-gap);const h=((height-40)*pct/100);bars+=`<g><rect x="${20+i*barWidth}" y="${height-20-h}" width="${w}" height="${h}" fill="${d.color||color}" rx="4"/><text x="${20+i*barWidth+w/2}" y="${height-5}" fill="#a0a0a0" text-anchor="middle" font-size="11">${d.label}</text></g>`;}});c.innerHTML=`<svg viewBox="0 0 ${width} ${height}" class="${s.svg}">${bars}</svg>`;return c;}