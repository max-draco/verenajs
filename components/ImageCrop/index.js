import s from './index.module.css';
export function createImageCrop({src='',aspectRatio=1,onCrop=()=>{}}){const c=document.createElement('div');c.className=s.cropper;c.innerHTML=`<div class="${s.imageWrap}"><img class="${s.image}" src="${src}"><div class="${s.selection}"><div class="${s.handle} ${s.nw}"></div><div class="${s.handle} ${s.ne}"></div><div class="${s.handle} ${s.sw}"></div><div class="${s.handle} ${s.se}"></div></div></div><div class="${s.actions}"><button class="${s.cancel}">Cancel</button><button class="${s.apply}">Apply</button></div>`;const selection=c.querySelector('.'+s.selection);let isDragging=false,startX=0,startY=0;selection.onmousedown=e=>{isDragging=true;startX=e.clientX-selection.offsetLeft;startY=e.clientY-selection.offsetTop;};document.onmousemove=e=>{if(!isDragging)return;selection.style.left=(e.clientX-startX)+'px';selection.style.top=(e.clientY-startY)+'px';};document.onmouseup=()=>isDragging=false;c.querySelector('.'+s.apply).onclick=()=>{const rect=selection.getBoundingClientRect();onCrop({x:rect.left,y:rect.top,width:rect.width,height:rect.height});};return c;}