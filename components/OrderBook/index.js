import s from './index.module.css';
export function createOrderBook({bids=[],asks=[],precision=2,onPriceClick=()=>{}}){const c=document.createElement('div');c.className=s.orderbook;const header=document.createElement('div');header.className=s.header;header.innerHTML=`<span>Price</span><span>Size</span><span>Total</span>`;c.appendChild(header);const askList=document.createElement('div');askList.className=s.asks;let askTotal=0;[...asks].reverse().forEach(a=>{askTotal+=a.size;const row=document.createElement('div');row.className=s.row;const pct=(a.size/Math.max(...asks.map(x=>x.size)))*100;row.innerHTML=`<span class="${s.price} ${s.ask}">${a.price.toFixed(precision)}</span><span>${a.size.toFixed(precision)}</span><span>${askTotal.toFixed(precision)}</span><div class="${s.bar} ${s.askBar}" style="width:${pct}%"></div>`;row.onclick=()=>onPriceClick(a.price,'ask');askList.appendChild(row);});c.appendChild(askList);const spread=document.createElement('div');spread.className=s.spread;const sp=asks[0]&&bids[0]?(asks[0].price-bids[0].price).toFixed(precision):'--';spread.innerHTML=`Spread: ${sp}`;c.appendChild(spread);const bidList=document.createElement('div');bidList.className=s.bids;let bidTotal=0;bids.forEach(b=>{bidTotal+=b.size;const row=document.createElement('div');row.className=s.row;const pct=(b.size/Math.max(...bids.map(x=>x.size)))*100;row.innerHTML=`<span class="${s.price} ${s.bid}">${b.price.toFixed(precision)}</span><span>${b.size.toFixed(precision)}</span><span>${bidTotal.toFixed(precision)}</span><div class="${s.bar} ${s.bidBar}" style="width:${pct}%"></div>`;row.onclick=()=>onPriceClick(b.price,'bid');bidList.appendChild(row);});c.appendChild(bidList);return c;}