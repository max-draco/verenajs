import s from './index.module.css';
export function createSelect({options=[],value='',placeholder='Select...',searchable=false,onChange=()=>{}}){const c=document.createElement('div');c.className=s.select;let isOpen=false,selected=options.find(o=>o.value===value);const render=()=>{c.innerHTML=`<div class="${s.trigger}"><span class="${s.value}">${selected?.label||placeholder}</span><span class="${s.arrow}">â–¼</span></div><div class="${s.dropdown}" style="display:none">${searchable?`<input class="${s.search}" placeholder="Search...">`:''}<div class="${s.options}">${options.map(o=>`<div class="${s.option} ${o.value===selected?.value?s.selected:''}" data-value="${o.value}">${o.label}</div>`).join('')}</div></div>`;c.querySelector('.'+s.trigger).onclick=()=>{isOpen=!isOpen;c.querySelector('.'+s.dropdown).style.display=isOpen?'block':'none';};c.querySelectorAll('.'+s.option).forEach(el=>el.onclick=()=>{selected=options.find(o=>o.value===el.dataset.value);onChange(selected);isOpen=false;render();});if(searchable){const inp=c.querySelector('.'+s.search);inp?.addEventListener('input',e=>{const q=e.target.value.toLowerCase();c.querySelectorAll('.'+s.option).forEach(el=>{el.style.display=el.textContent.toLowerCase().includes(q)?'':'none';});});}};render();document.addEventListener('click',e=>{if(!c.contains(e.target)&&isOpen){isOpen=false;c.querySelector('.'+s.dropdown).style.display='none';}});return{el:c,getValue:()=>selected,setValue:v=>{selected=options.find(o=>o.value===v);render();}};}