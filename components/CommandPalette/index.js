import s from './index.module.css';
export function createCommandPalette({commands=[],placeholder='Search commands...',onSelect=()=>{},onClose=()=>{}}){const c=document.createElement('div');c.className=s.overlay;const modal=document.createElement('div');modal.className=s.palette;const input=document.createElement('input');input.className=s.input;input.placeholder=placeholder;const list=document.createElement('div');list.className=s.list;let filtered=commands,idx=0;const render=()=>{list.innerHTML='';filtered.forEach((cmd,i)=>{const el=document.createElement('div');el.className=`${s.item} ${i===idx?s.selected:''}`;el.innerHTML=`${cmd.icon?`<span class="${s.icon}">${cmd.icon}</span>`:''}<span class="${s.label}">${cmd.label}</span>${cmd.shortcut?`<span class="${s.shortcut}">${cmd.shortcut}</span>`:''}`;el.onclick=()=>{onSelect(cmd);onClose();};list.appendChild(el);});};input.oninput=()=>{const q=input.value.toLowerCase();filtered=commands.filter(c=>c.label.toLowerCase().includes(q));idx=0;render();};input.onkeydown=e=>{if(e.key==='ArrowDown'){idx=Math.min(idx+1,filtered.length-1);render();}else if(e.key==='ArrowUp'){idx=Math.max(idx-1,0);render();}else if(e.key==='Enter'&&filtered[idx]){onSelect(filtered[idx]);onClose();}else if(e.key==='Escape')onClose();};c.onclick=e=>{if(e.target===c)onClose();};render();modal.append(input,list);c.appendChild(modal);setTimeout(()=>input.focus(),0);return c;}