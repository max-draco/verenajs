import s from './index.module.css';
export function createSparkline({data=[],width=100,height=30,color='#3b82f6',showEnd=true}){const c=document.createElement('span');c.className=s.sparkline;if(!data.length)return c;const max=Math.max(...data),min=Math.min(...data),range=max-min||1;const pts=data.map((v,i)=>({x:(i/(data.length-1))*width,y:height-((v-min)/range)*height*0.8-height*0.1}));const d=pts.map((p,i)=>`${i===0?'M':'L'}${p.x.toFixed(1)},${p.y.toFixed(1)}`).join(' ');const last=pts[pts.length-1];const trend=data[data.length-1]>=data[0]?'up':'down';c.innerHTML=`<svg viewBox="0 0 ${width} ${height}" class="${s.svg}"><path d="${d}" fill="none" stroke="${color}" stroke-width="1.5"/>${showEnd?`<circle cx="${last.x}" cy="${last.y}" r="2" fill="${color}"/>`:''}</svg>`;c.dataset.trend=trend;return c;}