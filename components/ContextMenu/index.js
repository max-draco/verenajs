import s from './index.module.css';
export function createContextMenu({items=[],onSelect=()=>{}}){let menu=null;const show=(x,y)=>{hide();menu=document.createElement('div');menu.className=s.menu;menu.style.left=x+'px';menu.style.top=y+'px';items.forEach(item=>{if(item.divider){const d=document.createElement('div');d.className=s.divider;menu.appendChild(d);return;}const el=document.createElement('div');el.className=`${s.item} ${item.disabled?s.disabled:''}`;el.innerHTML=`${item.icon?`<span>${item.icon}</span>`:''}${item.label}`;if(!item.disabled)el.onclick=()=>{onSelect(item);hide();};menu.appendChild(el);});document.body.appendChild(menu);};const hide=()=>{if(menu){menu.remove();menu=null;}};document.addEventListener('click',hide);return{show,hide,attach:(el)=>{el.oncontextmenu=e=>{e.preventDefault();show(e.clientX,e.clientY);};}};};